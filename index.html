<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calculadora</title>
  </head>
  <body>
    <div class="fundo">
      <h1>Math piroquinha</h1>
      <div class="calculadora">
        <h1>Calculadora</h1>

        <p id="resultado"></p>

        <table>
          <!-- Cria uma tabela -->
          <tr>
            <!-- tr = Cria uma row na tabela -->
            <td><button onclick="clean()">C</button></td>
            <!-- td = Criam o dado de cada parte da linha -->
            <td><button onclick="insert('/')">/</button></td>
            <td><button onclick="delet()"><-</button></td>
            <td><button onclick="insert('*')">x</button></td>
          </tr>
          <tr>
            <td><button onclick="insert('7')">7</button></td>
            <!-- onclick = quando o botão for clicado, insert é a função do JavaScript. -->
            <td><button onclick="insert('8')">8</button></td>
            <td><button onclick="insert('9')">9</button></td>
            <td><button onclick="insert('-')">-</button></td>
          </tr>
          <tr>
            <td><button onclick="insert('4')">4</button></td>
            <td><button onclick="insert('5')">5</button></td>
            <td><button onclick="insert('6')">6</button></td>
            <td><button onclick="insert('+')">+</button></td>
          </tr>
          <tr>
            <td><button onclick="insert('1')">1</button></td>
            <td><button onclick="insert('2')">2</button></td>
            <td><button onclick="insert('3')">3</button></td>
            <td rowspan="2"><button onclick="calcular()">=</button></td>
          </tr>
          <tr>
            <td colspan="2"><button onclick="insert('0')">0</button></td>
            <td><button onclick="insert('.')">.</button></td>
          </tr>
        </table>
      </div>
    </div>
              
    <script>
      function insert(num) {
  // num diz que o que está vindo para a função é um número.
  var elemento = document.getElementById("resultado");
  var texto = elemento.innerHTML;

  var operadores = ["+", "-", "*", "/"]; // verifica se tem algum desses operadores repetidos.
  if (operadores.includes(num)) {
    if (texto === "" || operadores.includes(texto.slice(-1))) {
      // Onde ele pode ser colocado.
      return;
    }
  }
              
  if (num === "."){

      let partes = texto.split(/[\+\-\*\/]/); //divide o texto por operadores
      let ultimoNumero = partes[partes.length - 1];
  
              if(ultimoNumero.includes('.')) 
              return;
  }

  elemento.innerHTML = texto + num;
}

function delet() {
  var elemento = document.getElementById("resultado");
  // Pega o conteúdo atual
  var texto = elemento.innerHTML;
  // Remove o último caractere
  elemento.innerHTML = texto.slice(0, -1);
}

function clean() {
  document.getElementById("resultado").innerHTML = "";
}

function calcular() {
  var resultado = document.getElementById("resultado").innerHTML;
  if (resultado) {
    document.getElementById("resultado").innerHTML = eval(resultado);
  }
}
    </script>
              
  </body>
</html>




